<?xml version="1.0" encoding="UTF-8"?>
<xwikidoc>
<web>Lib</web>
<name>MenuGenerator</name>
<language></language>
<defaultLanguage>en</defaultLanguage>
<translation>0</translation>
<parent>WiperDog.WebHome</parent>
<creator>XWiki.Admin</creator>
<author>XWiki.Admin</author>
<customClass></customClass>
<contentAuthor>XWiki.Admin</contentAuthor>
<creationDate>1376364375000</creationDate>
<date>1376364375000</date>
<contentUpdateDate>1376364375000</contentUpdateDate>
<version>4.3</version>
<title>MenuGenerator</title>
<defaultTemplate></defaultTemplate>
<validationScript></validationScript>
<comment>Imported from XAR</comment>
<minorEdit>false</minorEdit>
<syntaxId>xwiki/2.1</syntaxId>
<hidden>false</hidden>
<object>
<class>
<name>XWiki.JavaScriptExtension</name>
<customClass></customClass>
<customMapping></customMapping>
<defaultViewSheet></defaultViewSheet>
<defaultEditSheet></defaultEditSheet>
<defaultWeb></defaultWeb>
<nameField></nameField>
<validationScript></validationScript>
<cache>
<cache>0</cache>
<disabled>0</disabled>
<displayType>select</displayType>
<multiSelect>0</multiSelect>
<name>cache</name>
<number>5</number>
<prettyName>Caching policy</prettyName>
<relationalStorage>0</relationalStorage>
<separator> </separator>
<separators> ,|</separators>
<size>1</size>
<unmodifiable>0</unmodifiable>
<values>long|short|default|forbid</values>
<classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
</cache>
<code>
<disabled>0</disabled>
<name>code</name>
<number>2</number>
<prettyName>Code</prettyName>
<rows>20</rows>
<size>50</size>
<unmodifiable>0</unmodifiable>
<classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
</code>
<name>
<disabled>0</disabled>
<name>name</name>
<number>1</number>
<prettyName>Name</prettyName>
<size>30</size>
<unmodifiable>0</unmodifiable>
<classType>com.xpn.xwiki.objects.classes.StringClass</classType>
</name>
<parse>
<disabled>0</disabled>
<displayFormType>select</displayFormType>
<displayType>yesno</displayType>
<name>parse</name>
<number>4</number>
<prettyName>Parse content</prettyName>
<unmodifiable>0</unmodifiable>
<classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
</parse>
<use>
<cache>0</cache>
<disabled>0</disabled>
<displayType>select</displayType>
<multiSelect>0</multiSelect>
<name>use</name>
<number>3</number>
<prettyName>Use this extension</prettyName>
<relationalStorage>0</relationalStorage>
<separator> </separator>
<separators> ,|</separators>
<size>1</size>
<unmodifiable>0</unmodifiable>
<values>currentPage=Always on this page|onDemand=On demand|always=Always on this wiki</values>
<classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
</use>
</class>
<name>Lib.MenuGenerator</name>
<number>0</number>
<className>XWiki.JavaScriptExtension</className>
<guid>22d47077-abde-480e-893b-1c77d94fe25a</guid>
<property>
<cache>default</cache>
</property>
<property>
<code>var persisteduls=new Object()
var ddtreemenu=new Object()

ddtreemenu.closefolder="/xwiki/resources/SimpleTreeMenu/closed.gif" //set image path to "closed" folder image
ddtreemenu.openfolder="/xwiki/resources/SimpleTreeMenu/open.gif" //set image path to "open" folder image

//////////No need to edit beyond here///////////////////////////

ddtreemenu.createTree=function(treeid, enablepersist, persistdays){
var ultags=document.getElementById(treeid).getElementsByTagName("ul")
if (typeof persisteduls[treeid]=="undefined")
persisteduls[treeid]=(enablepersist==true &amp;&amp; ddtreemenu.getCookie(treeid)!="")? ddtreemenu.getCookie(treeid).split(",") : ""
for (var i=0; i&lt;ultags.length; i++)
ddtreemenu.buildSubTree(treeid, ultags[i], i)
if (enablepersist==true){ //if enable persist feature
var durationdays=(typeof persistdays=="undefined")? 1 : parseInt(persistdays)
ddtreemenu.dotask(window, function(){ddtreemenu.rememberstate(treeid, durationdays)}, "unload") //save opened UL indexes on body unload
}
}

ddtreemenu.buildSubTree=function(treeid, ulelement, index){
ulelement.parentNode.className="submenu"
if (typeof persisteduls[treeid]=="object"){ //if cookie exists (persisteduls[treeid] is an array versus "" string)
if (ddtreemenu.searcharray(persisteduls[treeid], index)){
ulelement.setAttribute("rel", "open")
ulelement.style.display="block"
ulelement.parentNode.style.backgroundImage="url("+ddtreemenu.openfolder+")"
}
else
ulelement.setAttribute("rel", "closed")
} //end cookie persist code
else if (ulelement.getAttribute("rel")==null || ulelement.getAttribute("rel")==false) //if no cookie and UL has NO rel attribute explicted added by user
ulelement.setAttribute("rel", "closed")
else if (ulelement.getAttribute("rel")=="open") //else if no cookie and this UL has an explicit rel value of "open"
ddtreemenu.expandSubTree(treeid, ulelement) //expand this UL plus all parent ULs (so the most inner UL is revealed!)
ulelement.parentNode.onclick=function(e){
var submenu=this.getElementsByTagName("ul")[0]
if (submenu.getAttribute("rel")=="closed"){
submenu.style.display="block"
submenu.setAttribute("rel", "open")
ulelement.parentNode.style.backgroundImage="url("+ddtreemenu.openfolder+")"
}
else if (submenu.getAttribute("rel")=="open"){
submenu.style.display="none"
submenu.setAttribute("rel", "closed")
ulelement.parentNode.style.backgroundImage="url("+ddtreemenu.closefolder+")"
}
ddtreemenu.preventpropagate(e)
}
ulelement.onclick=function(e){
ddtreemenu.preventpropagate(e)
}
}

ddtreemenu.expandSubTree=function(treeid, ulelement){ //expand a UL element and any of its parent ULs
var rootnode=document.getElementById(treeid)
var currentnode=ulelement
currentnode.style.display="block"
currentnode.parentNode.style.backgroundImage="url("+ddtreemenu.openfolder+")"
while (currentnode!=rootnode){
if (currentnode.tagName=="UL"){ //if parent node is a UL, expand it too
currentnode.style.display="block"
currentnode.setAttribute("rel", "open") //indicate it's open
currentnode.parentNode.style.backgroundImage="url("+ddtreemenu.openfolder+")"
}
currentnode=currentnode.parentNode
}
}

ddtreemenu.flatten=function(treeid, action){ //expand or contract all UL elements
var ultags=document.getElementById(treeid).getElementsByTagName("ul")
for (var i=0; i&lt;ultags.length; i++){
ultags[i].style.display=(action=="expand")? "block" : "none"
var relvalue=(action=="expand")? "open" : "closed"
ultags[i].setAttribute("rel", relvalue)
ultags[i].parentNode.style.backgroundImage=(action=="expand")? "url("+ddtreemenu.openfolder+")" : "url("+ddtreemenu.closefolder+")"
}
}

ddtreemenu.rememberstate=function(treeid, durationdays){ //store index of opened ULs relative to other ULs in Tree into cookie
var ultags=document.getElementById(treeid).getElementsByTagName("ul")
var openuls=new Array()
for (var i=0; i&lt;ultags.length; i++){
if (ultags[i].getAttribute("rel")=="open")
openuls[openuls.length]=i //save the index of the opened UL (relative to the entire list of ULs) as an array element
}
if (openuls.length==0) //if there are no opened ULs to save/persist
openuls[0]="none open" //set array value to string to simply indicate all ULs should persist with state being closed
ddtreemenu.setCookie(treeid, openuls.join(","), durationdays) //populate cookie with value treeid=1,2,3 etc (where 1,2... are the indexes of the opened ULs)
}

////A few utility functions below//////////////////////

ddtreemenu.getCookie=function(Name){ //get cookie value
var re=new RegExp(Name+"=[^;]+", "i"); //construct RE to search for target name/value pair
if (document.cookie.match(re)) //if cookie found
return document.cookie.match(re)[0].split("=")[1] //return its value
return ""
}

ddtreemenu.setCookie=function(name, value, days){ //set cookei value
var expireDate = new Date()
//set "expstring" to either future or past date, to set or delete cookie, respectively
var expstring=expireDate.setDate(expireDate.getDate()+parseInt(days))
document.cookie = name+"="+value+"; expires="+expireDate.toGMTString()+"; path=/";
}

ddtreemenu.searcharray=function(thearray, value){ //searches an array for the entered value. If found, delete value from array
var isfound=false
for (var i=0; i&lt;thearray.length; i++){
if (thearray[i]==value){
isfound=true
thearray.shift() //delete this element from array for efficiency sake
break
}
}
return isfound
}

ddtreemenu.preventpropagate=function(e){ //prevent action from bubbling upwards
if (typeof e!="undefined")
e.stopPropagation()
else
event.cancelBubble=true
}

ddtreemenu.dotask=function(target, functionref, tasktype){ //assign a function to execute to an event handler (ie: onunload)
var tasktype=(window.addEventListener)? tasktype : "on"+tasktype
if (target.addEventListener)
target.addEventListener(tasktype, functionref, false)
else if (target.attachEvent)
target.attachEvent(tasktype, functionref)
}</code>
</property>
<property>
<name>treeMenu-js</name>
</property>
<property>
<parse>0</parse>
</property>
<property>
<use>currentPage</use>
</property>
</object>
<object>
<class>
<name>XWiki.JavaScriptExtension</name>
<customClass></customClass>
<customMapping></customMapping>
<defaultViewSheet></defaultViewSheet>
<defaultEditSheet></defaultEditSheet>
<defaultWeb></defaultWeb>
<nameField></nameField>
<validationScript></validationScript>
<cache>
<cache>0</cache>
<disabled>0</disabled>
<displayType>select</displayType>
<multiSelect>0</multiSelect>
<name>cache</name>
<number>5</number>
<prettyName>Caching policy</prettyName>
<relationalStorage>0</relationalStorage>
<separator> </separator>
<separators> ,|</separators>
<size>1</size>
<unmodifiable>0</unmodifiable>
<values>long|short|default|forbid</values>
<classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
</cache>
<code>
<disabled>0</disabled>
<name>code</name>
<number>2</number>
<prettyName>Code</prettyName>
<rows>20</rows>
<size>50</size>
<unmodifiable>0</unmodifiable>
<classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
</code>
<name>
<disabled>0</disabled>
<name>name</name>
<number>1</number>
<prettyName>Name</prettyName>
<size>30</size>
<unmodifiable>0</unmodifiable>
<classType>com.xpn.xwiki.objects.classes.StringClass</classType>
</name>
<parse>
<disabled>0</disabled>
<displayFormType>select</displayFormType>
<displayType>yesno</displayType>
<name>parse</name>
<number>4</number>
<prettyName>Parse content</prettyName>
<unmodifiable>0</unmodifiable>
<classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
</parse>
<use>
<cache>0</cache>
<disabled>0</disabled>
<displayType>select</displayType>
<multiSelect>0</multiSelect>
<name>use</name>
<number>3</number>
<prettyName>Use this extension</prettyName>
<relationalStorage>0</relationalStorage>
<separator> </separator>
<separators> ,|</separators>
<size>1</size>
<unmodifiable>0</unmodifiable>
<values>currentPage=Always on this page|onDemand=On demand|always=Always on this wiki</values>
<classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
</use>
</class>
<name>Lib.MenuGenerator</name>
<number>1</number>
<className>XWiki.JavaScriptExtension</className>
<guid>8ea5c46d-1647-4958-8d98-6cf380267004</guid>
<property>
<cache>default</cache>
</property>
<property>
<code>ddtreemenu.createTree("treemenu2", true, 5)
</code></property><property><name>creatTreeMenu-js</name>
</property>
<property>
<parse>0</parse>
</property>
<property>
<use>onDemand</use>
</property>
</object>
<object>
<class>
<name>XWiki.StyleSheetExtension</name>
<customClass></customClass>
<customMapping></customMapping>
<defaultViewSheet></defaultViewSheet>
<defaultEditSheet></defaultEditSheet>
<defaultWeb></defaultWeb>
<nameField></nameField>
<validationScript></validationScript>
<cache>
<cache>0</cache>
<disabled>0</disabled>
<displayType>select</displayType>
<multiSelect>0</multiSelect>
<name>cache</name>
<number>5</number>
<prettyName>Caching policy</prettyName>
<relationalStorage>0</relationalStorage>
<separator> </separator>
<separators> ,|</separators>
<size>1</size>
<unmodifiable>0</unmodifiable>
<values>long|short|default|forbid</values>
<classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
</cache>
<code>
<disabled>0</disabled>
<name>code</name>
<number>2</number>
<prettyName>Code</prettyName>
<rows>20</rows>
<size>50</size>
<unmodifiable>0</unmodifiable>
<classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
</code>
<name>
<disabled>0</disabled>
<name>name</name>
<number>1</number>
<prettyName>Name</prettyName>
<size>30</size>
<unmodifiable>0</unmodifiable>
<classType>com.xpn.xwiki.objects.classes.StringClass</classType>
</name>
<parse>
<disabled>0</disabled>
<displayFormType>select</displayFormType>
<displayType>yesno</displayType>
<name>parse</name>
<number>4</number>
<prettyName>Parse content</prettyName>
<unmodifiable>0</unmodifiable>
<classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
</parse>
<use>
<cache>0</cache>
<disabled>0</disabled>
<displayType>select</displayType>
<multiSelect>0</multiSelect>
<name>use</name>
<number>3</number>
<prettyName>Use this extension</prettyName>
<relationalStorage>0</relationalStorage>
<separator> </separator>
<separators> ,|</separators>
<size>1</size>
<unmodifiable>0</unmodifiable>
<values>currentPage=Always on this page|onDemand=On demand|always=Always on this wiki</values>
<classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
</use>
</class>
<name>Lib.MenuGenerator</name>
<number>0</number>
<className>XWiki.StyleSheetExtension</className>
<guid>9a8cb683-6376-40e5-8bcb-a9e33cc762b3</guid>
<property>
<cache>default</cache>
</property>
<property>
<code>.treeview ul{ /*CSS for Simple Tree Menu*/
margin: 0;
padding: 0;

display:inline-block;
}
.treeview a{
 width:auto;
 display: inline-block
}
#nav a:hover{
 font-weight:bold;
 text-decoration:none;
 cursor:pointer;
 color: #0089DC

}
.treeview li{ /*Style for LI elements in general (excludes an LI that contains sub lists)*/
background: white url("/xwiki/resources/SimpleTreeMenu/list.gif") no-repeat left center;
list-style-type: none;
padding-left: 22px;
margin-bottom: 3px;
font-weight:bold

}

.treeview li.submenu{ /* Style for LI that contains sub lists (other ULs). */
background: white url("/xwiki/resources/SimpleTreeMenu/closed.gif") no-repeat left 1px;
cursor: hand !important;
cursor: pointer !important;

}
.treeview .ui-state-disabled {
background: white url("/xwiki/resources/SimpleTreeMenu/closed.gif") no-repeat left 1px;
color:#DBD9DA
}


.treeview li.submenu ul{ /*Style for ULs that are children of LIs (submenu) */
display: none; /*Hide them by default. Don't delete. */
}

.treeview .submenu ul li{ /*Style for LIs of ULs that are children of LIs (submenu) */
cursor: default;
font-weight:normal
}
#nav{
 float:left;
width:400px;
margin-right:20px;
}
#viewer #jobname{
  font-weight:bold;
  color:#0089DC;
  float :left;
}</code>
</property>
<property>
<name>treemenu-css</name>
</property>
<property>
<parse>0</parse>
</property>
<property>
<use>currentPage</use>
</property>
</object>
<content>{{include document="Lib.MongoDBConnection"/}}
{{groovy}}
@Grab(group='com.gmongo', module='gmongo', version='1.0')
import com.gmongo.GMongo
import java.text.SimpleDateFormat
import org.xwiki.context.*

def ec = services.component.getInstance(Execution.class).getContext()

println '{{html wiki = "true" clean="false"}}'
//def  dbName = 'wiperdog'
//def gmongo = new GMongo()
//db = gmongo.getDB(dbName)

MongoDBConnection.getConnection()
def root = [
	"MySQL",
	"SQL_Server",
	"Postgres"
	
]
def child = [
	"Database_Area",
	"Database_Statistic",
	"Database_Structure",
	"FaultManagement",
	"Performance",
	"Proactive_Check",
	"Others"
]

def check_coll = { coll-&gt;
	if( coll!="system.indexes" &amp;&amp; (coll.startsWith("MySQL")|| coll.startsWith("SQL_Server")|| coll.startsWith("Postgres"))){
		return true
	} else {
		return false
	}
}

def tmp_c = [:]
child.each{c-&gt;
	tmp_c[c]=[]
}
def tmp_r=[:]
root.each{r-&gt;
	tmp_r[r]=[:]
	child.each{c-&gt;
		tmp_r[r][c] = []
	}
}



def tmp = new ArrayList&lt;String&gt;();
def list_coll = []
def mapJobIstIid = [:]
MongoDBConnection.db.getCollectionNames().each{
	tmp = it.split("\\.")
	if(tmp.size() == 4){
		tmp += tmp[0] + "." + tmp[1] + "." + tmp[2]
                if(mapJobIstIid[tmp[4]] == null){
                   mapJobIstIid[tmp[4]] = [] 
                }
                mapJobIstIid[tmp[4]].add(tmp[3])
		list_coll.add(tmp)
	}
	tmp = []
}
ec.setProperty("mapJobIstIid", mapJobIstIid)

list_coll.each{
	if(root.contains(it[0])){
		if(child.contains(it[1])){
                        if(!tmp_r[it[0]][it[1]].contains(it[4])){
			   tmp_r[it[0]][it[1]].add(it[4])
                        }
		} else {
                    if(!tmp_r[it[0]]["Others"].contains(it[4])){
		        tmp_r[it[0]]["Others"].add(it[4])		
                    }
		}
	} 

}
def ul_open_r = false
def ul_open_c = false
def ul_open_j = false
println "&lt;div id='nav'&gt;"
println "&lt;a href=\"javascript:ddtreemenu.flatten('treemenu2', 'expand')\"&gt;Expand All&lt;/a&gt; ||&lt;a href=\"javascript:ddtreemenu.flatten('treemenu2', 'contact')\"&gt;Collapse All&lt;/a&gt; "



 tmp_r.each { r-&gt;	
	 if(!ul_open_r){
		 println "&lt;ul id='treemenu2' class='treeview'&gt;"
		 ul_open_r = true
	 }
	 print"&lt;li&gt;"+r.key
	 
	 r.value.each{ c-&gt;
		 if(!ul_open_c){
			 println "&lt;ul&gt;"
			 ul_open_c = true
		 }
		 println "&lt;li&gt;" + c.key
		 c.value.each{ j-&gt;
			 if(!ul_open_j){
				 println "&lt;ul&gt;"
				 ul_open_j = true
			 }
			 println "&lt;li&gt;&lt;a&gt;" + j +"&lt;/a&gt;&lt;/li&gt;"
		 }
		 if(ul_open_j){
			 println "&lt;/ul&gt;"
			 println"&lt;/li&gt;"	
			 ul_open_j = false
		 }else{
		 	 println"&lt;/li&gt;"
		 }		 
	 }
	 if(ul_open_c){
		 println "&lt;/ul&gt;"
		 println"&lt;/li&gt;"						 
		 ul_open_c = false
	 } else {
	 print "&lt;/li&gt;"
	 }
 }
 if(ul_open_r){
	 println "&lt;/ul&gt;"
	 ul_open_r = false
 } 
println "&lt;/div&gt;"
println "{{/html}}"
{{/groovy}}</content>
<versions>head	4.3;
access;
symbols;
locks; strict;
comment	@# @;


4.3
date	2013.08.13.12.26.15;	author XWiki_2EAdmin;	state full;
branches;
next	;


desc
@@


4.3
log
@Imported from XAR
@
text
@&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;xwikidoc&gt;
&lt;web&gt;Lib&lt;/web&gt;
&lt;name&gt;MenuGenerator&lt;/name&gt;
&lt;language&gt;&lt;/language&gt;
&lt;defaultLanguage&gt;en&lt;/defaultLanguage&gt;
&lt;translation&gt;0&lt;/translation&gt;
&lt;parent&gt;WiperDog.WebHome&lt;/parent&gt;
&lt;creator&gt;XWiki.Admin&lt;/creator&gt;
&lt;author&gt;XWiki.Admin&lt;/author&gt;
&lt;customClass&gt;&lt;/customClass&gt;
&lt;contentAuthor&gt;XWiki.Admin&lt;/contentAuthor&gt;
&lt;creationDate&gt;1376364375000&lt;/creationDate&gt;
&lt;date&gt;1376364375000&lt;/date&gt;
&lt;contentUpdateDate&gt;1376364375000&lt;/contentUpdateDate&gt;
&lt;version&gt;4.3&lt;/version&gt;
&lt;title&gt;MenuGenerator&lt;/title&gt;
&lt;defaultTemplate&gt;&lt;/defaultTemplate&gt;
&lt;validationScript&gt;&lt;/validationScript&gt;
&lt;comment&gt;Imported from XAR&lt;/comment&gt;
&lt;minorEdit&gt;false&lt;/minorEdit&gt;
&lt;syntaxId&gt;xwiki/2.1&lt;/syntaxId&gt;
&lt;hidden&gt;false&lt;/hidden&gt;
&lt;object&gt;
&lt;class&gt;
&lt;name&gt;XWiki.JavaScriptExtension&lt;/name&gt;
&lt;customClass&gt;&lt;/customClass&gt;
&lt;customMapping&gt;&lt;/customMapping&gt;
&lt;defaultViewSheet&gt;&lt;/defaultViewSheet&gt;
&lt;defaultEditSheet&gt;&lt;/defaultEditSheet&gt;
&lt;defaultWeb&gt;&lt;/defaultWeb&gt;
&lt;nameField&gt;&lt;/nameField&gt;
&lt;validationScript&gt;&lt;/validationScript&gt;
&lt;cache&gt;
&lt;cache&gt;0&lt;/cache&gt;
&lt;disabled&gt;0&lt;/disabled&gt;
&lt;displayType&gt;select&lt;/displayType&gt;
&lt;multiSelect&gt;0&lt;/multiSelect&gt;
&lt;name&gt;cache&lt;/name&gt;
&lt;number&gt;5&lt;/number&gt;
&lt;prettyName&gt;Caching policy&lt;/prettyName&gt;
&lt;relationalStorage&gt;0&lt;/relationalStorage&gt;
&lt;separator&gt; &lt;/separator&gt;
&lt;separators&gt; ,|&lt;/separators&gt;
&lt;size&gt;1&lt;/size&gt;
&lt;unmodifiable&gt;0&lt;/unmodifiable&gt;
&lt;values&gt;long|short|default|forbid&lt;/values&gt;
&lt;classType&gt;com.xpn.xwiki.objects.classes.StaticListClass&lt;/classType&gt;
&lt;/cache&gt;
&lt;code&gt;
&lt;disabled&gt;0&lt;/disabled&gt;
&lt;name&gt;code&lt;/name&gt;
&lt;number&gt;2&lt;/number&gt;
&lt;prettyName&gt;Code&lt;/prettyName&gt;
&lt;rows&gt;20&lt;/rows&gt;
&lt;size&gt;50&lt;/size&gt;
&lt;unmodifiable&gt;0&lt;/unmodifiable&gt;
&lt;classType&gt;com.xpn.xwiki.objects.classes.TextAreaClass&lt;/classType&gt;
&lt;/code&gt;
&lt;name&gt;
&lt;disabled&gt;0&lt;/disabled&gt;
&lt;name&gt;name&lt;/name&gt;
&lt;number&gt;1&lt;/number&gt;
&lt;prettyName&gt;Name&lt;/prettyName&gt;
&lt;size&gt;30&lt;/size&gt;
&lt;unmodifiable&gt;0&lt;/unmodifiable&gt;
&lt;classType&gt;com.xpn.xwiki.objects.classes.StringClass&lt;/classType&gt;
&lt;/name&gt;
&lt;parse&gt;
&lt;disabled&gt;0&lt;/disabled&gt;
&lt;displayFormType&gt;select&lt;/displayFormType&gt;
&lt;displayType&gt;yesno&lt;/displayType&gt;
&lt;name&gt;parse&lt;/name&gt;
&lt;number&gt;4&lt;/number&gt;
&lt;prettyName&gt;Parse content&lt;/prettyName&gt;
&lt;unmodifiable&gt;0&lt;/unmodifiable&gt;
&lt;classType&gt;com.xpn.xwiki.objects.classes.BooleanClass&lt;/classType&gt;
&lt;/parse&gt;
&lt;use&gt;
&lt;cache&gt;0&lt;/cache&gt;
&lt;disabled&gt;0&lt;/disabled&gt;
&lt;displayType&gt;select&lt;/displayType&gt;
&lt;multiSelect&gt;0&lt;/multiSelect&gt;
&lt;name&gt;use&lt;/name&gt;
&lt;number&gt;3&lt;/number&gt;
&lt;prettyName&gt;Use this extension&lt;/prettyName&gt;
&lt;relationalStorage&gt;0&lt;/relationalStorage&gt;
&lt;separator&gt; &lt;/separator&gt;
&lt;separators&gt; ,|&lt;/separators&gt;
&lt;size&gt;1&lt;/size&gt;
&lt;unmodifiable&gt;0&lt;/unmodifiable&gt;
&lt;values&gt;currentPage=Always on this page|onDemand=On demand|always=Always on this wiki&lt;/values&gt;
&lt;classType&gt;com.xpn.xwiki.objects.classes.StaticListClass&lt;/classType&gt;
&lt;/use&gt;
&lt;/class&gt;
&lt;name&gt;Lib.MenuGenerator&lt;/name&gt;
&lt;number&gt;0&lt;/number&gt;
&lt;className&gt;XWiki.JavaScriptExtension&lt;/className&gt;
&lt;guid&gt;22d47077-abde-480e-893b-1c77d94fe25a&lt;/guid&gt;
&lt;property&gt;
&lt;cache&gt;default&lt;/cache&gt;
&lt;/property&gt;
&lt;property&gt;
&lt;code&gt;var persisteduls=new Object()
var ddtreemenu=new Object()

ddtreemenu.closefolder="/xwiki/resources/SimpleTreeMenu/closed.gif" //set image path to "closed" folder image
ddtreemenu.openfolder="/xwiki/resources/SimpleTreeMenu/open.gif" //set image path to "open" folder image

//////////No need to edit beyond here///////////////////////////

ddtreemenu.createTree=function(treeid, enablepersist, persistdays){
var ultags=document.getElementById(treeid).getElementsByTagName("ul")
if (typeof persisteduls[treeid]=="undefined")
persisteduls[treeid]=(enablepersist==true &amp;amp;&amp;amp; ddtreemenu.getCookie(treeid)!="")? ddtreemenu.getCookie(treeid).split(",") : ""
for (var i=0; i&amp;lt;ultags.length; i++)
ddtreemenu.buildSubTree(treeid, ultags[i], i)
if (enablepersist==true){ //if enable persist feature
var durationdays=(typeof persistdays=="undefined")? 1 : parseInt(persistdays)
ddtreemenu.dotask(window, function(){ddtreemenu.rememberstate(treeid, durationdays)}, "unload") //save opened UL indexes on body unload
}
}

ddtreemenu.buildSubTree=function(treeid, ulelement, index){
ulelement.parentNode.className="submenu"
if (typeof persisteduls[treeid]=="object"){ //if cookie exists (persisteduls[treeid] is an array versus "" string)
if (ddtreemenu.searcharray(persisteduls[treeid], index)){
ulelement.setAttribute("rel", "open")
ulelement.style.display="block"
ulelement.parentNode.style.backgroundImage="url("+ddtreemenu.openfolder+")"
}
else
ulelement.setAttribute("rel", "closed")
} //end cookie persist code
else if (ulelement.getAttribute("rel")==null || ulelement.getAttribute("rel")==false) //if no cookie and UL has NO rel attribute explicted added by user
ulelement.setAttribute("rel", "closed")
else if (ulelement.getAttribute("rel")=="open") //else if no cookie and this UL has an explicit rel value of "open"
ddtreemenu.expandSubTree(treeid, ulelement) //expand this UL plus all parent ULs (so the most inner UL is revealed!)
ulelement.parentNode.onclick=function(e){
var submenu=this.getElementsByTagName("ul")[0]
if (submenu.getAttribute("rel")=="closed"){
submenu.style.display="block"
submenu.setAttribute("rel", "open")
ulelement.parentNode.style.backgroundImage="url("+ddtreemenu.openfolder+")"
}
else if (submenu.getAttribute("rel")=="open"){
submenu.style.display="none"
submenu.setAttribute("rel", "closed")
ulelement.parentNode.style.backgroundImage="url("+ddtreemenu.closefolder+")"
}
ddtreemenu.preventpropagate(e)
}
ulelement.onclick=function(e){
ddtreemenu.preventpropagate(e)
}
}

ddtreemenu.expandSubTree=function(treeid, ulelement){ //expand a UL element and any of its parent ULs
var rootnode=document.getElementById(treeid)
var currentnode=ulelement
currentnode.style.display="block"
currentnode.parentNode.style.backgroundImage="url("+ddtreemenu.openfolder+")"
while (currentnode!=rootnode){
if (currentnode.tagName=="UL"){ //if parent node is a UL, expand it too
currentnode.style.display="block"
currentnode.setAttribute("rel", "open") //indicate it's open
currentnode.parentNode.style.backgroundImage="url("+ddtreemenu.openfolder+")"
}
currentnode=currentnode.parentNode
}
}

ddtreemenu.flatten=function(treeid, action){ //expand or contract all UL elements
var ultags=document.getElementById(treeid).getElementsByTagName("ul")
for (var i=0; i&amp;lt;ultags.length; i++){
ultags[i].style.display=(action=="expand")? "block" : "none"
var relvalue=(action=="expand")? "open" : "closed"
ultags[i].setAttribute("rel", relvalue)
ultags[i].parentNode.style.backgroundImage=(action=="expand")? "url("+ddtreemenu.openfolder+")" : "url("+ddtreemenu.closefolder+")"
}
}

ddtreemenu.rememberstate=function(treeid, durationdays){ //store index of opened ULs relative to other ULs in Tree into cookie
var ultags=document.getElementById(treeid).getElementsByTagName("ul")
var openuls=new Array()
for (var i=0; i&amp;lt;ultags.length; i++){
if (ultags[i].getAttribute("rel")=="open")
openuls[openuls.length]=i //save the index of the opened UL (relative to the entire list of ULs) as an array element
}
if (openuls.length==0) //if there are no opened ULs to save/persist
openuls[0]="none open" //set array value to string to simply indicate all ULs should persist with state being closed
ddtreemenu.setCookie(treeid, openuls.join(","), durationdays) //populate cookie with value treeid=1,2,3 etc (where 1,2... are the indexes of the opened ULs)
}

////A few utility functions below//////////////////////

ddtreemenu.getCookie=function(Name){ //get cookie value
var re=new RegExp(Name+"=[^;]+", "i"); //construct RE to search for target name/value pair
if (document.cookie.match(re)) //if cookie found
return document.cookie.match(re)[0].split("=")[1] //return its value
return ""
}

ddtreemenu.setCookie=function(name, value, days){ //set cookei value
var expireDate = new Date()
//set "expstring" to either future or past date, to set or delete cookie, respectively
var expstring=expireDate.setDate(expireDate.getDate()+parseInt(days))
document.cookie = name+"="+value+"; expires="+expireDate.toGMTString()+"; path=/";
}

ddtreemenu.searcharray=function(thearray, value){ //searches an array for the entered value. If found, delete value from array
var isfound=false
for (var i=0; i&amp;lt;thearray.length; i++){
if (thearray[i]==value){
isfound=true
thearray.shift() //delete this element from array for efficiency sake
break
}
}
return isfound
}

ddtreemenu.preventpropagate=function(e){ //prevent action from bubbling upwards
if (typeof e!="undefined")
e.stopPropagation()
else
event.cancelBubble=true
}

ddtreemenu.dotask=function(target, functionref, tasktype){ //assign a function to execute to an event handler (ie: onunload)
var tasktype=(window.addEventListener)? tasktype : "on"+tasktype
if (target.addEventListener)
target.addEventListener(tasktype, functionref, false)
else if (target.attachEvent)
target.attachEvent(tasktype, functionref)
}&lt;/code&gt;
&lt;/property&gt;
&lt;property&gt;
&lt;name&gt;treeMenu-js&lt;/name&gt;
&lt;/property&gt;
&lt;property&gt;
&lt;parse&gt;0&lt;/parse&gt;
&lt;/property&gt;
&lt;property&gt;
&lt;use&gt;currentPage&lt;/use&gt;
&lt;/property&gt;
&lt;/object&gt;
&lt;object&gt;
&lt;class&gt;
&lt;name&gt;XWiki.JavaScriptExtension&lt;/name&gt;
&lt;customClass&gt;&lt;/customClass&gt;
&lt;customMapping&gt;&lt;/customMapping&gt;
&lt;defaultViewSheet&gt;&lt;/defaultViewSheet&gt;
&lt;defaultEditSheet&gt;&lt;/defaultEditSheet&gt;
&lt;defaultWeb&gt;&lt;/defaultWeb&gt;
&lt;nameField&gt;&lt;/nameField&gt;
&lt;validationScript&gt;&lt;/validationScript&gt;
&lt;cache&gt;
&lt;cache&gt;0&lt;/cache&gt;
&lt;disabled&gt;0&lt;/disabled&gt;
&lt;displayType&gt;select&lt;/displayType&gt;
&lt;multiSelect&gt;0&lt;/multiSelect&gt;
&lt;name&gt;cache&lt;/name&gt;
&lt;number&gt;5&lt;/number&gt;
&lt;prettyName&gt;Caching policy&lt;/prettyName&gt;
&lt;relationalStorage&gt;0&lt;/relationalStorage&gt;
&lt;separator&gt; &lt;/separator&gt;
&lt;separators&gt; ,|&lt;/separators&gt;
&lt;size&gt;1&lt;/size&gt;
&lt;unmodifiable&gt;0&lt;/unmodifiable&gt;
&lt;values&gt;long|short|default|forbid&lt;/values&gt;
&lt;classType&gt;com.xpn.xwiki.objects.classes.StaticListClass&lt;/classType&gt;
&lt;/cache&gt;
&lt;code&gt;
&lt;disabled&gt;0&lt;/disabled&gt;
&lt;name&gt;code&lt;/name&gt;
&lt;number&gt;2&lt;/number&gt;
&lt;prettyName&gt;Code&lt;/prettyName&gt;
&lt;rows&gt;20&lt;/rows&gt;
&lt;size&gt;50&lt;/size&gt;
&lt;unmodifiable&gt;0&lt;/unmodifiable&gt;
&lt;classType&gt;com.xpn.xwiki.objects.classes.TextAreaClass&lt;/classType&gt;
&lt;/code&gt;
&lt;name&gt;
&lt;disabled&gt;0&lt;/disabled&gt;
&lt;name&gt;name&lt;/name&gt;
&lt;number&gt;1&lt;/number&gt;
&lt;prettyName&gt;Name&lt;/prettyName&gt;
&lt;size&gt;30&lt;/size&gt;
&lt;unmodifiable&gt;0&lt;/unmodifiable&gt;
&lt;classType&gt;com.xpn.xwiki.objects.classes.StringClass&lt;/classType&gt;
&lt;/name&gt;
&lt;parse&gt;
&lt;disabled&gt;0&lt;/disabled&gt;
&lt;displayFormType&gt;select&lt;/displayFormType&gt;
&lt;displayType&gt;yesno&lt;/displayType&gt;
&lt;name&gt;parse&lt;/name&gt;
&lt;number&gt;4&lt;/number&gt;
&lt;prettyName&gt;Parse content&lt;/prettyName&gt;
&lt;unmodifiable&gt;0&lt;/unmodifiable&gt;
&lt;classType&gt;com.xpn.xwiki.objects.classes.BooleanClass&lt;/classType&gt;
&lt;/parse&gt;
&lt;use&gt;
&lt;cache&gt;0&lt;/cache&gt;
&lt;disabled&gt;0&lt;/disabled&gt;
&lt;displayType&gt;select&lt;/displayType&gt;
&lt;multiSelect&gt;0&lt;/multiSelect&gt;
&lt;name&gt;use&lt;/name&gt;
&lt;number&gt;3&lt;/number&gt;
&lt;prettyName&gt;Use this extension&lt;/prettyName&gt;
&lt;relationalStorage&gt;0&lt;/relationalStorage&gt;
&lt;separator&gt; &lt;/separator&gt;
&lt;separators&gt; ,|&lt;/separators&gt;
&lt;size&gt;1&lt;/size&gt;
&lt;unmodifiable&gt;0&lt;/unmodifiable&gt;
&lt;values&gt;currentPage=Always on this page|onDemand=On demand|always=Always on this wiki&lt;/values&gt;
&lt;classType&gt;com.xpn.xwiki.objects.classes.StaticListClass&lt;/classType&gt;
&lt;/use&gt;
&lt;/class&gt;
&lt;name&gt;Lib.MenuGenerator&lt;/name&gt;
&lt;number&gt;1&lt;/number&gt;
&lt;className&gt;XWiki.JavaScriptExtension&lt;/className&gt;
&lt;guid&gt;8ea5c46d-1647-4958-8d98-6cf380267004&lt;/guid&gt;
&lt;property&gt;
&lt;cache&gt;default&lt;/cache&gt;
&lt;/property&gt;
&lt;property&gt;
&lt;code&gt;ddtreemenu.createTree("treemenu2", true, 5)
&lt;/code&gt;&lt;/property&gt;&lt;property&gt;&lt;name&gt;creatTreeMenu-js&lt;/name&gt;
&lt;/property&gt;
&lt;property&gt;
&lt;parse&gt;0&lt;/parse&gt;
&lt;/property&gt;
&lt;property&gt;
&lt;use&gt;onDemand&lt;/use&gt;
&lt;/property&gt;
&lt;/object&gt;
&lt;object&gt;
&lt;class&gt;
&lt;name&gt;XWiki.StyleSheetExtension&lt;/name&gt;
&lt;customClass&gt;&lt;/customClass&gt;
&lt;customMapping&gt;&lt;/customMapping&gt;
&lt;defaultViewSheet&gt;&lt;/defaultViewSheet&gt;
&lt;defaultEditSheet&gt;&lt;/defaultEditSheet&gt;
&lt;defaultWeb&gt;&lt;/defaultWeb&gt;
&lt;nameField&gt;&lt;/nameField&gt;
&lt;validationScript&gt;&lt;/validationScript&gt;
&lt;cache&gt;
&lt;cache&gt;0&lt;/cache&gt;
&lt;disabled&gt;0&lt;/disabled&gt;
&lt;displayType&gt;select&lt;/displayType&gt;
&lt;multiSelect&gt;0&lt;/multiSelect&gt;
&lt;name&gt;cache&lt;/name&gt;
&lt;number&gt;5&lt;/number&gt;
&lt;prettyName&gt;Caching policy&lt;/prettyName&gt;
&lt;relationalStorage&gt;0&lt;/relationalStorage&gt;
&lt;separator&gt; &lt;/separator&gt;
&lt;separators&gt; ,|&lt;/separators&gt;
&lt;size&gt;1&lt;/size&gt;
&lt;unmodifiable&gt;0&lt;/unmodifiable&gt;
&lt;values&gt;long|short|default|forbid&lt;/values&gt;
&lt;classType&gt;com.xpn.xwiki.objects.classes.StaticListClass&lt;/classType&gt;
&lt;/cache&gt;
&lt;code&gt;
&lt;disabled&gt;0&lt;/disabled&gt;
&lt;name&gt;code&lt;/name&gt;
&lt;number&gt;2&lt;/number&gt;
&lt;prettyName&gt;Code&lt;/prettyName&gt;
&lt;rows&gt;20&lt;/rows&gt;
&lt;size&gt;50&lt;/size&gt;
&lt;unmodifiable&gt;0&lt;/unmodifiable&gt;
&lt;classType&gt;com.xpn.xwiki.objects.classes.TextAreaClass&lt;/classType&gt;
&lt;/code&gt;
&lt;name&gt;
&lt;disabled&gt;0&lt;/disabled&gt;
&lt;name&gt;name&lt;/name&gt;
&lt;number&gt;1&lt;/number&gt;
&lt;prettyName&gt;Name&lt;/prettyName&gt;
&lt;size&gt;30&lt;/size&gt;
&lt;unmodifiable&gt;0&lt;/unmodifiable&gt;
&lt;classType&gt;com.xpn.xwiki.objects.classes.StringClass&lt;/classType&gt;
&lt;/name&gt;
&lt;parse&gt;
&lt;disabled&gt;0&lt;/disabled&gt;
&lt;displayFormType&gt;select&lt;/displayFormType&gt;
&lt;displayType&gt;yesno&lt;/displayType&gt;
&lt;name&gt;parse&lt;/name&gt;
&lt;number&gt;4&lt;/number&gt;
&lt;prettyName&gt;Parse content&lt;/prettyName&gt;
&lt;unmodifiable&gt;0&lt;/unmodifiable&gt;
&lt;classType&gt;com.xpn.xwiki.objects.classes.BooleanClass&lt;/classType&gt;
&lt;/parse&gt;
&lt;use&gt;
&lt;cache&gt;0&lt;/cache&gt;
&lt;disabled&gt;0&lt;/disabled&gt;
&lt;displayType&gt;select&lt;/displayType&gt;
&lt;multiSelect&gt;0&lt;/multiSelect&gt;
&lt;name&gt;use&lt;/name&gt;
&lt;number&gt;3&lt;/number&gt;
&lt;prettyName&gt;Use this extension&lt;/prettyName&gt;
&lt;relationalStorage&gt;0&lt;/relationalStorage&gt;
&lt;separator&gt; &lt;/separator&gt;
&lt;separators&gt; ,|&lt;/separators&gt;
&lt;size&gt;1&lt;/size&gt;
&lt;unmodifiable&gt;0&lt;/unmodifiable&gt;
&lt;values&gt;currentPage=Always on this page|onDemand=On demand|always=Always on this wiki&lt;/values&gt;
&lt;classType&gt;com.xpn.xwiki.objects.classes.StaticListClass&lt;/classType&gt;
&lt;/use&gt;
&lt;/class&gt;
&lt;name&gt;Lib.MenuGenerator&lt;/name&gt;
&lt;number&gt;0&lt;/number&gt;
&lt;className&gt;XWiki.StyleSheetExtension&lt;/className&gt;
&lt;guid&gt;9a8cb683-6376-40e5-8bcb-a9e33cc762b3&lt;/guid&gt;
&lt;property&gt;
&lt;cache&gt;default&lt;/cache&gt;
&lt;/property&gt;
&lt;property&gt;
&lt;code&gt;.treeview ul{ /*CSS for Simple Tree Menu*/
margin: 0;
padding: 0;

display:inline-block;
}
.treeview a{
 width:auto;
 display: inline-block
}
#nav a:hover{
 font-weight:bold;
 text-decoration:none;
 cursor:pointer;
 color: #0089DC

}
.treeview li{ /*Style for LI elements in general (excludes an LI that contains sub lists)*/
background: white url("/xwiki/resources/SimpleTreeMenu/list.gif") no-repeat left center;
list-style-type: none;
padding-left: 22px;
margin-bottom: 3px;
font-weight:bold

}

.treeview li.submenu{ /* Style for LI that contains sub lists (other ULs). */
background: white url("/xwiki/resources/SimpleTreeMenu/closed.gif") no-repeat left 1px;
cursor: hand !important;
cursor: pointer !important;

}
.treeview .ui-state-disabled {
background: white url("/xwiki/resources/SimpleTreeMenu/closed.gif") no-repeat left 1px;
color:#DBD9DA
}


.treeview li.submenu ul{ /*Style for ULs that are children of LIs (submenu) */
display: none; /*Hide them by default. Don't delete. */
}

.treeview .submenu ul li{ /*Style for LIs of ULs that are children of LIs (submenu) */
cursor: default;
font-weight:normal
}
#nav{
 float:left;
width:400px;
margin-right:20px;
}
#viewer #jobname{
  font-weight:bold;
  color:#0089DC;
  float :left;
}&lt;/code&gt;
&lt;/property&gt;
&lt;property&gt;
&lt;name&gt;treemenu-css&lt;/name&gt;
&lt;/property&gt;
&lt;property&gt;
&lt;parse&gt;0&lt;/parse&gt;
&lt;/property&gt;
&lt;property&gt;
&lt;use&gt;currentPage&lt;/use&gt;
&lt;/property&gt;
&lt;/object&gt;
&lt;content&gt;{{include document="Lib.MongoDBConnection"/}}
{{groovy}}
@@Grab(group='com.gmongo', module='gmongo', version='1.0')
import com.gmongo.GMongo
import java.text.SimpleDateFormat
import org.xwiki.context.*

def ec = services.component.getInstance(Execution.class).getContext()

println '{{html wiki = "true" clean="false"}}'
//def  dbName = 'wiperdog'
//def gmongo = new GMongo()
//db = gmongo.getDB(dbName)

MongoDBConnection.getConnection()
def root = [
	"MySQL",
	"SQL_Server",
	"Postgres"
	
]
def child = [
	"Database_Area",
	"Database_Statistic",
	"Database_Structure",
	"FaultManagement",
	"Performance",
	"Proactive_Check",
	"Others"
]

def check_coll = { coll-&amp;gt;
	if( coll!="system.indexes" &amp;amp;&amp;amp; (coll.startsWith("MySQL")|| coll.startsWith("SQL_Server")|| coll.startsWith("Postgres"))){
		return true
	} else {
		return false
	}
}

def tmp_c = [:]
child.each{c-&amp;gt;
	tmp_c[c]=[]
}
def tmp_r=[:]
root.each{r-&amp;gt;
	tmp_r[r]=[:]
	child.each{c-&amp;gt;
		tmp_r[r][c] = []
	}
}



def tmp = new ArrayList&amp;lt;String&amp;gt;();
def list_coll = []
def mapJobIstIid = [:]
MongoDBConnection.db.getCollectionNames().each{
	tmp = it.split("\\.")
	if(tmp.size() == 4){
		tmp += tmp[0] + "." + tmp[1] + "." + tmp[2]
                if(mapJobIstIid[tmp[4]] == null){
                   mapJobIstIid[tmp[4]] = [] 
                }
                mapJobIstIid[tmp[4]].add(tmp[3])
		list_coll.add(tmp)
	}
	tmp = []
}
ec.setProperty("mapJobIstIid", mapJobIstIid)

list_coll.each{
	if(root.contains(it[0])){
		if(child.contains(it[1])){
                        if(!tmp_r[it[0]][it[1]].contains(it[4])){
			   tmp_r[it[0]][it[1]].add(it[4])
                        }
		} else {
                    if(!tmp_r[it[0]]["Others"].contains(it[4])){
		        tmp_r[it[0]]["Others"].add(it[4])		
                    }
		}
	} 

}
def ul_open_r = false
def ul_open_c = false
def ul_open_j = false
println "&amp;lt;div id='nav'&amp;gt;"
println "&amp;lt;a href=\"javascript:ddtreemenu.flatten('treemenu2', 'expand')\"&amp;gt;Expand All&amp;lt;/a&amp;gt; ||&amp;lt;a href=\"javascript:ddtreemenu.flatten('treemenu2', 'contact')\"&amp;gt;Collapse All&amp;lt;/a&amp;gt; "



 tmp_r.each { r-&amp;gt;	
	 if(!ul_open_r){
		 println "&amp;lt;ul id='treemenu2' class='treeview'&amp;gt;"
		 ul_open_r = true
	 }
	 print"&amp;lt;li&amp;gt;"+r.key
	 
	 r.value.each{ c-&amp;gt;
		 if(!ul_open_c){
			 println "&amp;lt;ul&amp;gt;"
			 ul_open_c = true
		 }
		 println "&amp;lt;li&amp;gt;" + c.key
		 c.value.each{ j-&amp;gt;
			 if(!ul_open_j){
				 println "&amp;lt;ul&amp;gt;"
				 ul_open_j = true
			 }
			 println "&amp;lt;li&amp;gt;&amp;lt;a&amp;gt;" + j +"&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;"
		 }
		 if(ul_open_j){
			 println "&amp;lt;/ul&amp;gt;"
			 println"&amp;lt;/li&amp;gt;"	
			 ul_open_j = false
		 }else{
		 	 println"&amp;lt;/li&amp;gt;"
		 }		 
	 }
	 if(ul_open_c){
		 println "&amp;lt;/ul&amp;gt;"
		 println"&amp;lt;/li&amp;gt;"						 
		 ul_open_c = false
	 } else {
	 print "&amp;lt;/li&amp;gt;"
	 }
 }
 if(ul_open_r){
	 println "&amp;lt;/ul&amp;gt;"
	 ul_open_r = false
 } 
println "&amp;lt;/div&amp;gt;"
println "{{/html}}"
{{/groovy}}&lt;/content&gt;&lt;/xwikidoc&gt;
@
</versions></xwikidoc>